
# Subtask folder description #

This folder contains the subtasks that are called during the execution of playbooks. 

Note: These subtasks cannot be executed independently.


## Access interface related subtasks - description ##

> These subtasks are called during the execution of following playbooks
>
> - playbook_access_add_preview.yml
>
> - playbook_access_add_commit.yml
>
> - playbook_access_incremental_preview.yml
>
> - playbook_access_incremental_commit.yml
>

### 1) subtask_acc_intf_access.yml: ###
```
    Sets the value for necessary variables for access type interfaces and call subtask_acc_intf_commit.yml
    or subtask_acc_intf_preview.yml
```

### 2) subtask_acc_intf_trunk.yml: ###
```
    Sets the value for necessary variables for access type interfaces and call subtask_acc_intf_commit.yml
    or subtask_acc_intf_preview.yml
```

### 3) subtask_acc_intf_commit.yml: ###
```
    Pushes the configs of an access interface to the devices
```

### 4) subtask_acc_intf_preview.yml: ###
```     
    Saves the configs of an access interface to a varible without pushing it to the devices
```

### 5) subtask_get_access_vlan.yml: ###
```
    Loads group_vars/overlay_db.yml and filters the VLANs of type 'access'

```

### Sequence Diagram: ###
                    
```
        ________________________
       |         playbook        |
       |_________________________|
                    |
                    |           __________________________
                    |-----1--->|  subtask_acc_intf_trunk  |
                    |          |__________________________|
                    |                        |                          __________________________
                    |                        |-------------1a*-------->| subtask_get_access_vlan  | 
                    |                        |<------------1b*---------|__________________________|
                    |                        |
                    |                        |                          __________________________________
                    |                        |-------------1c--------->| subtask_acc_intf_commit/preview  | 
                    |                        |<------------1d**--------|__________________________________|
                    |           _____________|____________
                    |<----2----|  subtask_acc_intf_trunk  |
                    |          |__________________________|
                    |
                    |
                    |    
                    |           __________________________
                    |-----3--->|  subtask_acc_intf_access |
                    |          |__________________________|
                    |                        |
                    |                        |                 __________________________________
                    |                        |-------3a------>| subtask_acc_intf_commit/preview  | 
                    |                        |<------3b**-----|__________________________________|
                    |                        |
                    |           _____________|____________
                    |<----4----|  subtask_acc_intf_access |
                    |          |__________________________|
                    |
        ____________|____________
       |         playbook        |
       |_________________________|
```

### Path description: ###

**Path 1:**
- Sends trunk interface dictionary present in host_vars/access_intf/<hostname>.yml

**Path 1a\*:**
- Call to subtask subtask_get_access_vlan

**Path 1b\*:**   
- Sends back the 'access' type VLAN present in group_vars/overlay_db.yml

**Path 1c:**
- Sends the interface name, its dictionary (if present), and VLAN list from group_vars/overlay_db.yml (only for add playbooks)

**Path 1d\*\*:** 
- Sends back the config generated by cisco.ios.ios_l2_interfaces in the case of preview playbooks

**Path 2:**    
- Passes the config generated by cisco.ios.ios_l2_interfaces in the case of preview playbooks

**Path 3:**    
- Sends access interface dictionary present in host_vars/access_intf/<hostname>.yml

**Path 3a:**   
- Sends the interface name and its dictionary (if present)

**Path 3b\*\*:** 
- Sends back the config generated by cisco.ios.ios_l2_interfaces in the case of preview playbooks

**Path 4:**
- Passes the config generated by cisco.ios.ios_l2_interfaces in the case of preview playbooks

>\*  - This path is enabled only for playbook_access_add_commit.yml and playbook_access_add_preview.yml

>\** - This path is enabled only for playbook_access_add_preview.yml and playbook_access_inc_preview.yml
